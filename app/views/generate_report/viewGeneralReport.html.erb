<style>
  table.customTable {
  background-color: #FFFFFF;
  border-collapse: collapse;
  border-width: 2px;
  border-color: black;
  border-style: solid;
  color: #000000;
  
  }

  table.customTable td, table.customTable th {
  border-width: 2px;
  border-color: black;
  border-style: solid;
  padding: 2px;
  }
  .scrolling_table{
    max-width: 100%;
    width: 100% !important;
    height: 80vh;
    max-height: 80vh !important;
    overflow:auto;
    margin:auto;
  }
</style>
<div class="scrolling_table">
  <table class="customTable mt-5">
    <thead>
      <tr>
        <td colspan="2">Report Number</td>
        <td colspan="<%= 39+@essFaciTitles.length%>">&nbsp;</td>
      </tr>
      <tr>
        <td colspan="2">GENERATED AS OF: </td>
        <td colspan="4"><%= Time.current %></td>
        <td colspan="2">GENERATED BY: </td>
        <td colspan="4"><%= User.find(session[:user_id]).full_name %></td>
        <td colspan="2">EMAIL</td>
        <td colspan="4"><%= User.find(session[:user_id]).email %></td>
        <td colspan="3">CONTACT#:</td>
        <td colspan="3"><%= User.find(session[:user_id]).cnum %></td>

      </tr>
      <tr>
        <td colspan="2">INCIDENT NAME</td>
        <td colspan="4"><%= @disaster.name%></td>
        <td colspan="2">DISASTER TYPE</td>
        <td colspan="4"><%= @disaster.disaster_type%></td>
        <td colspan="2">DATE OF OCCURENCE</td>
        <td colspan="4"><%= @disaster.date_of_occurence %></td>
      </tr>
      <tr >
        <td colspan="2">NOTED BY</td>
        <td colspan="<%= 38+@essFaciTitles.length%>"></td>
      </tr>
      <tr align ="center" style="background: #c5e0b3">
        <td rowspan="3" style="background: #9fc5e8">Barangay</td>
        <td colspan="5" rowspan="2" >Number of Affected</td>
        <td colspan="4" style="background:#93c47d">Number of Displaced Inside ECs</td>
        <td colspan="4" style="background:#fef2cb">INFANT 1y/o(0-11mos)</td>
        <td colspan="4" style="background:#fef2cb">TODDLERS 1-3y/o</td>
        <td colspan="4" style="background:#fef2cb">PRESCHOOLERS 4-5y/o</td>
        <td colspan="4" style="background:#fef2cb">SCHOOLAGE 6-12y/o</td>
        <td colspan="4" style="background:#fef2cb">TEENAGE 13-19y/o</td>
        <td colspan="4" style="background:#fef2cb">ADULT 20-59y/o</td>
        <td colspan="4" style="background:#fef2cb">SENIOR CITIZEN 60 AND ABOVE</td>
        <td colspan="2" style="background:#f7caac"></td>
        <td style="background:#9fc5e8" colspan="<%=@essFaciTitles.length%>">&nbsp;</td>
      </tr> 
      <tr align ="center">
        <td colspan="2" style="background:#93c47d">FAMILIES</td>
        <td colspan="2" style="background:#93c47d">PERSONS</td>
        <% for i in 1..7 do %>
          <td colspan="2" style="background:#fef2cb">MALE</td>
          <td colspan="2" style="background:#fef2cb">FEMALE</td>
        <%end%>
        <td colspan="2" style="background:#f7caac">TOTAL COST OF ASSISTANCE</td>
        <td colspan="<%=@essFaciTitles.length%>" style="background:#9fc5e8">EVACUATION CENTER FACILITIES</td>
      </tr>
      <tr style="background: #c5e0b3">
        <td >EVACUATION CENTER</td>
        <td>COUNT</td>
        <td>FAMILIES</td>
        <td>PERSONS</td>
        <td>4Ps FAMILIES</td>
        <% for i in 1..2 do %>
          <td style="background:#93c47d">CUM</td>
          <td style="background:#93c47d">NOW</td>
        <%end%>
        <% for i in 1..14 do %>
          <td style="background:#fef2cb">CUM</td>
          <td style="background:#fef2cb">NOW</td>
        <%end%>
        <td style="background:#f7caac">FOOD</td>
        <td style="background:#f7caac">NON-FOOD</td>
        <%@essFaciTitles.each do |faci|%>
          <td style="background:#9fc5e8"><%=faci%></td>
        <%end%>
      </tr>
      <tr style="background: #7f7f7f">
        <td>GRAND TOTAL</td>
        <td><%= EvacCenter.all.length%></td>
        <td><%= @affectedEvac %></td>
        <td><%= @totalfamily%></td>
        <td><%= @totalPersons%></td>
        <td><%= @totalfamily4ps%></td>
        <td><%= @CumFamilies%></td>
        <td><%= @NowFamilies%></td>
        <td><%= @CumPerson%></td>
        <td><%= @NowPerson%></td>
        <td><%= @infantM%></td>
        <td><%= @infantM_now%></td>
        <td><%= @infantF%></td>
        <td><%= @infantF_now%></td>
        <td><%= @toddlerM%></td>
        <td><%= @toddlerM_now%></td>
        <td><%= @toddlerF%></td>
        <td><%= @toddlerF_now%></td>
        <td><%= @preschoolersM%></td>
        <td><%= @preschoolersM_now%></td>
        <td><%= @preschoolersF%></td>
        <td><%= @preschoolersF_now%></td>
        <td><%= @schoolageM%></td>
        <td><%= @schoolageM_now%></td>
        <td><%= @schoolageF%></td>
        <td><%= @schoolageF_now%></td>
        <td><%= @teenageM%></td>
        <td><%= @teenageM_now%></td>
        <td><%= @teenageF%></td>
        <td><%= @teenageF_now%></td>
        <td><%= @adultM%></td>
        <td><%= @adultM_now%></td>
        <td><%= @adultF%></td>
        <td><%= @adultF_now%></td>
        <td><%= @seniorM%></td>
        <td><%= @seniorM_now%></td>
        <td><%= @seniorF%></td>
        <td><%= @seniorF_now%></td>
        <td><%= @tfprice%></td>
        <td><%= @tnfprice%></td>
        <%@essFaciTitles.each do |faci|%>
          <td>&nbsp;</td>
        <%end%>
      </tr>
    </thead>
    <tbody>
      <% @barangays.each do |brgy|%>
        <tr style="background:#a5a5a5">
          <td>
            <%= brgy %>
          </td>
          <% for i in 1..39 + @essFaciTitles.length do %>
            <td>
              &nbsp;
            </td>
          <%end%>
        </tr>
        <% @evac_centers.each do |center| %>
          <% if  brgy == center.barangay %>
            <tr>
              <td>
              </td>
              <td >
                <%= center.name %>
              </td>
              <td>
                <%= countServedFamilyType(zcountServedFamily(center.id, @disaster.id, false)) %>
              </td>
              <td>
                <%= zcountServedFamily(center.id, @disaster.id, false) %>
              </td>
              <td>
                <%= zcountIndivEvacuated(center.id, @disaster.id, false)%>
              </td>
              <td>
                <%= zcountServedFamily4ps(center.id, @disaster.id, false) %>
              </td>
              <td>
                <%= zcountServedFamily(center.id, @disaster.id, false) %>
              </td>
              <td>
                <%= zcountServedFamily(center.id, @disaster.id, true) %>
              </td>
              <td>
                <%= zcountIndivEvacuated(center.id, @disaster.id, false) %>
              </td>
              <td>
                <%= zcountIndivEvacuated(center.id, @disaster.id, true) %>
              </td>
              <td>
                <%= ggetInfants(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetInfants(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetInfants(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetInfants(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetToddlers(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetToddlers(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetToddlers(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetToddlers(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetPreschoolers(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetPreschoolers(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetPreschoolers(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetPreschoolers(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetSchoolagers(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetSchoolagers(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetSchoolagers(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetSchoolagers(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetTeenagers(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetTeenagers(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetTeenagers(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetTeenagers(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetAdults(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetAdults(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetAdults(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetAdults(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%= ggetSeniors(center.id, @disaster.id, "Male",false) %>
              </td>
              <td>
                <%= ggetSeniors(center.id, @disaster.id, "Male", true) %>
              </td>
              <td>
                <%= ggetSeniors(center.id, @disaster.id, "Female",false) %>
              </td>
              <td>
                <%= ggetSeniors(center.id, @disaster.id, "Female", true) %>
              </td>
              <td>
                <%=gen_getReliefCost(center.id, @disaster.id,true)%>
              </td>
              <td>
                <%=gen_getReliefCost(center.id, @disaster.id,false)%>
              </td>
              <% gen_getQuantity(center.id, @disaster).each do |x| %>
                <td>
                  <%=x%>
                </td>
              <%end%>
              <% if gen_getQuantity(center.id, @disaster).length < @essFaciTitles.length %>
                <% for i in 1..@essFaciTitles.length-gen_getQuantity(center.id, @disaster).length do %>
                  <td>
                    &nbsp;
                  </td>
                <%end%>
              <%end%>
            </tr>
          <%end%>
        <%end%>
      <%end%>
    </tbody>
  </table>
</div>
